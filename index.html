<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>PODCHAT WEB v0.1.6</title>
    <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
    <link rel="stylesheet" href="styles/index.css">
</head>
<div class="loader"></div>
<p class="message">...در حال بارگذاری چت</p>

<div id="chat"></div>
<body>
<script type="text/javascript">
  function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[#&]' + name + '(=([^&#]*)|&|#|$)'),
      results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
  }

  let token = getParameterByName("access_token");
  if(!token) {
    window.location = "https://accounts.pod.land/oauth2/authorize/?client_id=2051121e4348af52664cf7de0bda&response_type=token&redirect_uri=http://chat.fanapsoft.ir"
  }

  require.config( {waitSeconds : 3000});
  if (token) {
    requirejs(["src/index-0.1.6.js"], function (util) {
      util.Podchat({token,
        onTokenExpire(){
            window.location = "https://accounts.pod.land/oauth2/authorize/?client_id=2051121e4348af52664cf7de0bda&response_type=token&redirect_uri=http://chat.fanapsoft.ir"
        }}, "chat");
    });
  }
</script>
</body>
</html>